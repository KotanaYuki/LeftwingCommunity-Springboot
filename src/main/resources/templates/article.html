<!DOCTYPE html>
<!-- 加载thymeleaf模板 -->
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title th:text="${articleTitle}">测试markdown文本网页</title>
    <link rel="icon" th:href="@{/img/logo.png}" href="../static/img/logo.png" type="image/x-icon">

    <!-- 加载Bootstrap V5，Springboot项目自动扫描resource资源目录 -->
    <link th:href="@{/bootstrap-5.1.3-dist/css/bootstrap.min.css}"
          href="../static/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script th:src="@{/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js}"
            src="../static/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js" type="text/javascript"
            charset="utf-8"></script>

    <!-- 加载index.css -->
    <link th:href="@{/css/index.css}" href="../static/css/index.css" rel="stylesheet" type="text/css">

</head>

<!-- 使用iframe标签实现文章主体页面 -->
<body>

<!-- 顶部导航栏:灰色的水平导航栏在小型屏幕上变为垂直 -->
<nav class="navbar navbar-expand-lg bg-danger navbar-dark sticky-top">

    <div class="container-fluid">
        <!-- 设置Logo -->
        <div class="navbar-brand">
            LeftwingBlog-Springboot
        </div>

        <!-- 设置小屏按钮折叠导航栏 -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse"  id="collapsibleNavbar">
            <!-- 后面的标签向右对齐 -->
            <div class="me-auto"></div>

            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/home}">首页</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/article_list?page=1}">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/library}">文库</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/error_page}">捐赠</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/error_page}">关于</a>
                </li>
            </ul>

            <!-- 搜索功能表单 -->
            <form class="d-flex" action="#" th:action="@{/article_search}" method="get">
                <input class="form-control me-2" type="text" name="content_like" placeholder="Enter the words" required="required">
                <input class="" type="hidden" name="page" value="1">

                <button class="btn btn-dark" type="submit">Search</button>
            </form>

        </div>
    </div>

</nav>

<!-- 网站内容 -->
<div class="container">

    <div class="row">
        <div class="col-lg-9">
            <!-- 正文 -->
            <div class="container mt-lg-3 rounded" id="bg">
<!--                <span th:utext="${articleContent}">Default!</span>-->
<!--                <iframe th:src="test_Иванович.html" src="test_Иванович.html" scrolling="auto" width="100%" height="500px"></iframe>-->
<!--                <object style="border:0px" type="text/x-scriptlet" data="test_Иванович.html" width=100% height=512px></object>-->

                <!-- 使用iframe标签嵌套网页 id="childFrame"使父网页应用子网页的height -->
                <iframe th:src="@{/page/{url}(url=${url})}" src="../static/page/test_Иванович.html" scrolling="no" width=100% height=100% id="childFrame"></iframe>
                <br>
                <br>
                <br>

                <!-- 发表评论的表单 -->
                <div class="container bg-light rounded shadow p-4 mb-4 bg-white" id="success">
                    <form action="#" th:action="@{/article/insert}" method="get">
                        <input type="hidden" name="article_id" value="1" th:value="${article_id}">
                        <div class="mb-3">
                            <label for="email" class="form-label"><strong>电子邮件</strong>：</label>
                            <input type="email" class="form-control" id="email" placeholder="想匿名?输入我们的工作邮箱试试~(1391301@aspotgmail.org)" required="required" name="email">
                        </div>
                        <div class="mb-3">
                            <label for="comment" class="form-label"><strong>评论</strong>：</label>
                            <textarea class="form-control" rows="5" id="comment" name="comment" placeholder="请友好交流哦~" required="required" maxlength="512"></textarea>
                        </div>
                        <button id="create" type="submit" class="btn btn-danger">提交</button>
                    </form>
                </div>
                <br>
                <br>
                <br>
                <!-- 评论区展示 -->
                <div class="container bg-light rounded shadow p-4 mb-4 bg-white">
                    <p class="h3 text-center">评论区</p><hr>
                    <!-- 单条评论 -->
                    <div class="m-3" th:each="articleComment, status:${articleComments}">
                        <div class="container border border-danger rounded" style="height: auto">
                            <div class="row">
                                <!-- 头像 -->
                                <div class="col-2 mt-2 displayNone">
                                    <img class="img-thumbnail img-fluid mx-auto d-block" style="max-width: 88px;max-height: 120px" src="../static/img/portrait/10.jpg" alt="头像" th:src="${portraitList.get(status.index)}">
                                </div>
                                <!-- 评论内容 -->
                                <div  class="col-10 mt-1">
                                    <p class="h5" style="overflow: hidden;white-space:nowrap;text-overflow: ellipsis;" th:text="${'游客[' + articleComment.getEmail() + ']说'}">游客[1391301@aspotgmail.org]说:</p>
                                    <p class="lead" style="text-indent: 2em"><small th:text="${articleComment.getComment()}">一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.一些演示文本.</small></p>
                                    <p class="h6 text-end text-muted" th:text="${'发布时间:' + articleComment.getCreateBy()}">发布时间:2022/10/1 下午6:08</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <br>
                <br>
                <br>

            </div>
            <!-- 底部空区域留白 -->
            <br>
            <br>
            <br>

        </div>

        <!-- 右侧悬浮列表组 -->
        <div class="col-lg-3">
            <div class="mt-lg-3 rounded">
                <!-- 固定在顶部 -->
                <div class="list-group text-break" style="word-break: break-all;position: fixed;width: 310px">
                    <a href="#" class="list-group-item list-group-item-action active list-group-item-danger">推荐文章</a>
                    <a href="#" class="list-group-item list-group-item-action">《约·菲·贝克尔、约·狄慈根、弗·恩格斯、卡·马克思等致弗·阿·左尔格等书信集》俄译本序言(1907年4月6日〔19日〕)</a>
                    <a href="#" class="list-group-item list-group-item-action">关于自决问题的争论总结 （1916年7月）</a>
                    <a href="#" class="list-group-item list-group-item-action">评国民党十一中全会和三届二次国民参政会 </a>
                    <a href="#" class="list-group-item list-group-item-action">台尔曼同志的结束语（共产国际执行委员会第十次全会第二十一次会议，1929年7月19日）</a>
                    <a href="#" class="list-group-item list-group-item-action">巴枯宁“国家制度和无政府状态”一书摘要（1874年）</a>
                    <a href="#" class="list-group-item list-group-item-action">马克思：数学手稿（复旦大学版）</a>
                    <a href="#" class="list-group-item list-group-item-action">托洛茨基同志的演讲：苏维埃共和国-兄弟联盟！——世界上将有一个属于全人类的苏维埃共和国！（附录音。1919年 ）</a>
                </div>

            </div>
        </div>

    </div>

</div>

<script>
    //当设备为小型设备时隐藏评论头像
    let hid=function (){
        let array=document.querySelectorAll('.displayNone')
        for ( let a of array) {
            a.style.display= document.documentElement.clientWidth>768?'block':'none'
            if (document.documentElement.clientWidth<768){ a.nextElementSibling.className="col-12 mt-1"}

        }
    }
    window.onresize=hid()
    window.addEventListener("beforeunload", hid())

    //评论反馈
    // document.querySelector('#create').addEventListener('click',()=>{
    //
    //     window.addEventListener("beforeunload",()=>{
    //
    //         let e=document.createElement('div')
    //         e.innerText='评论成功！'
    //         e.className='success alert alert-success'
    //         e.style.display='flot-left'
    //         document.querySelector('#success').appendChild(e)
    //         setTimeout(()=>{
    //             document.querySelector('#success').removeChild(document.querySelector('.success'))
    //         },2002)
    //
    //     })
    //
    // })



</script>
</body>

</html>